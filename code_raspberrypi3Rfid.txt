#!/usr/bin/env python

import time
import RPi.GPIO as GPIO
from mfrc522 import SimpleMFRC522

ts = int(time.time())
datetime = time.strftime('%A, %Y-%m-%d %H:%M:%S', time.localtime(ts))
reader = SimpleMFRC522()

try:
	id,text = reader.read()
	print(text)
	print(datetime)
	
	file_read = open('data.txt','r+')
	file_line - file_read.readlines()
	file_read.close()
	last_line = file_line[len(file_line) - 1]
	print(last_line)

	file = open('data.txt', 'a+')
	file.write(str(id))
	file.write(",")
	file.write(str(ts))
	file.write("\n")
	file.close()

	print("Added informations: ")
	file = open('data.txt','r+')
	for line in file:
		line = line.rstrip()
		print(line)
	file.close()
finally: 
	GPIO.cleanup

#	Com esta linha, ele vai continuar rodando infinitamente
	time.sleep(10)